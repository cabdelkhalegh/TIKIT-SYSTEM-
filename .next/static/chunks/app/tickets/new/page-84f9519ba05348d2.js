(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6453:(e,r,t)=>{Promise.resolve().then(t.bind(t,8911))},8911:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(5155),i=t(2115),l=t(63);function o(){let e=(0,l.useRouter)(),[r,t]=(0,i.useState)([]),[o,a]=(0,i.useState)({title:"",description:"",priority:"medium",userId:""}),[d,n]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/users");if(!e.ok)throw Error("Failed to fetch users");let r=await e.json();t(r),r.length>0&&a(e=>({...e,userId:r[0].id}))}catch(e){u(e.message)}},h=async r=>{r.preventDefault(),n(!0),u(null);try{let r=await fetch("/api/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create ticket")}e.push("/")}catch(e){u(e.message)}finally{n(!1)}},x=e=>{let{name:r,value:t}=e.target;a(e=>({...e,[r]:t}))};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("button",{onClick:()=>e.push("/"),className:"text-blue-600 hover:text-blue-800 font-medium",children:"â† Back to Tickets"})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create New Ticket"}),c&&(0,s.jsxs)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["Error: ",c]}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,s.jsx)("input",{type:"text",id:"title",name:"title",required:!0,value:o.title,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ticket title"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,s.jsx)("textarea",{id:"description",name:"description",required:!0,value:o.description,onChange:x,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe the issue or request"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,s.jsxs)("select",{id:"priority",name:"priority",value:o.priority,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 mb-2",children:"User *"}),(0,s.jsx)("select",{id:"userId",name:"userId",required:!0,value:o.userId,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Ticket"}),(0,s.jsx)("button",{type:"button",onClick:()=>e.push("/"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})]})]})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6453)),_N_E=e.O()}]);
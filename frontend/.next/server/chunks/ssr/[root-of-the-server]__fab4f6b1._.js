module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},70323,a=>{"use strict";let b={director:6,finance:5,campaign_manager:4,reviewer:3,influencer:2,client:1};function c(a,b){return!!a&&!!a.role&&!!a.role_approved&&a.role===b}function d(a,c){return!!a&&!!a.role&&!!a.role_approved&&b[a.role]>=b[c]}function e(a){return c(a,"director")}function f(a){return d(a,"campaign_manager")}function g(a){return({director:"Director",campaign_manager:"Campaign Manager",reviewer:"Reviewer",finance:"Finance",influencer:"Influencer",client:"Client"})[a]}function h(a){return({director:"bg-purple-100 text-purple-800",campaign_manager:"bg-blue-100 text-blue-800",reviewer:"bg-yellow-100 text-yellow-800",finance:"bg-green-100 text-green-800",influencer:"bg-pink-100 text-pink-800",client:"bg-gray-100 text-gray-800"})[a]}a.s(["getRoleBadgeColor",()=>h,"getRoleDisplayName",()=>g,"hasMinimumRole",()=>d,"hasRole",()=>c,"isCampaignManagerOrHigher",()=>f,"isDirector",()=>e])},15861,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36545);function f({children:a,requiredApproval:f=!0}){let{profile:g,loading:h}=(0,e.useAuth)(),i=(0,d.useRouter)();return((0,c.useEffect)(()=>{if(!h){if(!g)return void i.push("/login");if(f&&(!g.role||!g.role_approved))return void i.push("/pending-approval")}},[g,h,i,f]),h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):g&&(!f||g.role&&g.role_approved)?(0,b.jsx)(b.Fragment,{children:a}):null}a.i(70323),a.s(["default",()=>f])},46208,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(36545),g=a.i(15861),h=a.i(70323);function i(){return(0,b.jsx)(g.default,{children:(0,b.jsx)(j,{})})}function j(){let a=(0,d.useRouter)(),{user:g,profile:i}=(0,f.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(""),t=(0,h.isCampaignManagerOrHigher)(i);async function u(){try{let{data:a,error:b}=await e.supabase.from("campaigns").select("*").order("created_at",{ascending:!1});if(b)throw b;k(a||[])}catch(a){console.error("Error fetching campaigns:",a.message)}finally{o(!1)}}async function v(){try{let{data:a,error:b}=await e.supabase.from("clients").select("*").order("name");if(b)throw b;m(a||[])}catch(a){console.error("Error fetching clients:",a.message)}}(0,c.useEffect)(()=>{u(),v()},[]);let w=a=>{if(!a)return"No Client";let b=l.find(b=>b.id===a);return b?.name||"Unknown Client"},x=j.filter(a=>{if("all"!==p&&a.status!==p)return!1;if(r){let b=r.toLowerCase(),c=w(a.client_id).toLowerCase();return a.name.toLowerCase().includes(b)||a.campaign_code.toLowerCase().includes(b)||c.includes(b)}return!0});return n?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Loading campaigns..."})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Campaigns"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your marketing campaigns"})]}),t&&(0,b.jsx)("button",{onClick:()=>a.push("/campaigns/new"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"+ New Campaign"})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",placeholder:"Search by name, code, or client...",value:r,onChange:a=>s(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,b.jsx)("option",{value:"all",children:"All Status"}),(0,b.jsx)("option",{value:"draft",children:"Draft"}),(0,b.jsx)("option",{value:"brief_pending",children:"Brief Pending"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"content_review",children:"Content Review"}),(0,b.jsx)("option",{value:"client_review",children:"Client Review"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"archived",children:"Archived"})]})]})}),0===x.length?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:r||"all"!==p?"No campaigns match your filters.":"No campaigns yet. Create your first campaign to get started."})}):(0,b.jsx)("div",{className:"grid gap-4",children:x.map(c=>{var d;return(0,b.jsxs)("div",{onClick:()=>a.push(`/campaigns/${c.id}`),className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition cursor-pointer",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:c.name}),(0,b.jsx)("span",{className:"text-sm font-mono text-gray-500",children:c.campaign_code})]}),(0,b.jsx)("p",{className:"text-gray-600",children:w(c.client_id)})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${{draft:"bg-gray-100 text-gray-800",brief_pending:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",content_review:"bg-blue-100 text-blue-800",client_review:"bg-purple-100 text-purple-800",completed:"bg-indigo-100 text-indigo-800",archived:"bg-gray-100 text-gray-600"}[c.status]||"bg-gray-100 text-gray-800"}`,children:{draft:"Draft",brief_pending:"Brief Pending",active:"Active",content_review:"Content Review",client_review:"Client Review",completed:"Completed",archived:"Archived"}[d=c.status]||d})]}),c.description&&(0,b.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-2",children:c.description}),(0,b.jsxs)("div",{className:"flex gap-6 text-sm text-gray-500",children:[c.start_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Start:"})," ",new Date(c.start_date).toLocaleDateString()]}),c.end_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"End:"})," ",new Date(c.end_date).toLocaleDateString()]}),c.budget_amount&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Budget:"})," ",c.budget_currency," ",c.budget_amount.toLocaleString()]})]})]},c.id)})})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fab4f6b1._.js.map
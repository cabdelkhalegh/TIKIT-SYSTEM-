module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},70323,a=>{"use strict";let b={director:6,finance:5,campaign_manager:4,reviewer:3,influencer:2,client:1};function c(a,b){return!!a&&!!a.role&&!!a.role_approved&&a.role===b}function d(a,c){return!!a&&!!a.role&&!!a.role_approved&&b[a.role]>=b[c]}function e(a){return c(a,"director")}function f(a){return d(a,"campaign_manager")}function g(a){return({director:"Director",campaign_manager:"Campaign Manager",reviewer:"Reviewer",finance:"Finance",influencer:"Influencer",client:"Client"})[a]}function h(a){return({director:"bg-purple-100 text-purple-800",campaign_manager:"bg-blue-100 text-blue-800",reviewer:"bg-yellow-100 text-yellow-800",finance:"bg-green-100 text-green-800",influencer:"bg-pink-100 text-pink-800",client:"bg-gray-100 text-gray-800"})[a]}a.s(["getRoleBadgeColor",()=>h,"getRoleDisplayName",()=>g,"hasMinimumRole",()=>d,"hasRole",()=>c,"isCampaignManagerOrHigher",()=>f,"isDirector",()=>e])},15861,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36545);function f({children:a,requiredApproval:f=!0}){let{profile:g,loading:h}=(0,e.useAuth)(),i=(0,d.useRouter)();return((0,c.useEffect)(()=>{if(!h){if(!g)return void i.push("/login");if(f&&(!g.role||!g.role_approved))return void i.push("/pending-approval")}},[g,h,i,f]),h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):g&&(!f||g.role&&g.role_approved)?(0,b.jsx)(b.Fragment,{children:a}):null}a.i(70323),a.s(["default",()=>f])},1850,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(36545),g=a.i(15861),h=a.i(70323);function i(){return(0,b.jsx)(g.default,{children:(0,b.jsx)(j,{})})}function j(){let a=(0,d.useRouter)(),{user:g,profile:i}=(0,f.useAuth)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)({name:"",client_id:"",description:"",start_date:"",end_date:"",budget_amount:"",budget_currency:"USD",campaign_manager_id:"",reviewer_id:""}),[t,u]=(0,c.useState)({});async function v(){try{let{data:a,error:b}=await e.supabase.from("clients").select("*").eq("is_active",!0).order("name");if(b)throw b;m(a||[])}catch(a){console.error("Error fetching clients:",a.message)}}async function w(){try{let{data:a,error:b}=await e.supabase.from("profiles").select("*").eq("role","campaign_manager").eq("role_approved",!0).order("full_name");if(b)throw b;o(a||[]);let{data:c,error:d}=await e.supabase.from("profiles").select("*").eq("role","reviewer").eq("role_approved",!0).order("full_name");if(d)throw d;q(c||[])}catch(a){console.error("Error fetching team members:",a.message)}}async function x(b){let c;if(b.preventDefault(),c={},r.name.trim()||(c.name="Campaign name is required"),r.start_date&&r.end_date&&new Date(r.start_date)>new Date(r.end_date)&&(c.end_date="End date must be after start date"),r.budget_amount&&0>parseFloat(r.budget_amount)&&(c.budget_amount="Budget must be a positive number"),u(c),0===Object.keys(c).length){k(!0);try{let b={name:r.name,client_id:r.client_id||null,description:r.description||null,start_date:r.start_date||null,end_date:r.end_date||null,budget_amount:r.budget_amount?parseFloat(r.budget_amount):null,budget_currency:r.budget_currency,campaign_manager_id:r.campaign_manager_id||null,reviewer_id:r.reviewer_id||null,status:"draft",created_by:g?.id},{data:c,error:d}=await e.supabase.from("campaigns").insert([b]).select().single();if(d)throw d;a.push(`/campaigns/${c.id}`)}catch(a){console.error("Error creating campaign:",a.message),alert("Failed to create campaign: "+a.message)}finally{k(!1)}}}return(0,c.useEffect)(()=>{i&&!(0,h.isCampaignManagerOrHigher)(i)?a.push("/dashboard"):(v(),w())},[i]),(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"text-indigo-600 hover:text-indigo-800 mb-4",children:"â† Back to Campaigns"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Campaign"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Campaign code will be auto-generated (e.g., TKT-2026-0001)"})]}),(0,b.jsxs)("form",{onSubmit:x,className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name *"}),(0,b.jsx)("input",{type:"text",value:r.name,onChange:a=>s({...r,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Summer Collection 2026"}),t.name&&(0,b.jsx)("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),(0,b.jsxs)("select",{value:r.client_id,onChange:a=>s({...r,client_id:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,b.jsx)("option",{value:"",children:"Select a client"}),l.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.client_code,")"]},a.id))]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:r.description,onChange:a=>s({...r,description:a.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of the campaign objectives..."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:r.start_date,onChange:a=>s({...r,start_date:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:r.end_date,onChange:a=>s({...r,end_date:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),t.end_date&&(0,b.jsx)("p",{className:"text-red-600 text-sm mt-1",children:t.end_date})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Amount"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:r.budget_amount,onChange:a=>s({...r,budget_amount:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"10000.00"}),t.budget_amount&&(0,b.jsx)("p",{className:"text-red-600 text-sm mt-1",children:t.budget_amount})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,b.jsxs)("select",{value:r.budget_currency,onChange:a=>s({...r,budget_currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,b.jsx)("option",{value:"USD",children:"USD"}),(0,b.jsx)("option",{value:"EUR",children:"EUR"}),(0,b.jsx)("option",{value:"GBP",children:"GBP"}),(0,b.jsx)("option",{value:"CAD",children:"CAD"}),(0,b.jsx)("option",{value:"AUD",children:"AUD"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Manager"}),(0,b.jsxs)("select",{value:r.campaign_manager_id,onChange:a=>s({...r,campaign_manager_id:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,b.jsx)("option",{value:"",children:"Assign later"}),n.map(a=>(0,b.jsx)("option",{value:a.id,children:a.full_name||a.email},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reviewer"}),(0,b.jsxs)("select",{value:r.reviewer_id,onChange:a=>s({...r,reviewer_id:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,b.jsx)("option",{value:"",children:"Assign later"}),p.map(a=>(0,b.jsx)("option",{value:a.id,children:a.full_name||a.email},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:j,children:j?"Creating...":"Create Campaign"})]})]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c704b169._.js.map
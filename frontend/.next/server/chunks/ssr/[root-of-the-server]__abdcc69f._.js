module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},70323,a=>{"use strict";let b={director:6,finance:5,campaign_manager:4,reviewer:3,influencer:2,client:1};function c(a,b){return!!a&&!!a.role&&!!a.role_approved&&a.role===b}function d(a,c){return!!a&&!!a.role&&!!a.role_approved&&b[a.role]>=b[c]}function e(a){return c(a,"director")}function f(a){return d(a,"campaign_manager")}function g(a){return({director:"Director",campaign_manager:"Campaign Manager",reviewer:"Reviewer",finance:"Finance",influencer:"Influencer",client:"Client"})[a]}function h(a){return({director:"bg-purple-100 text-purple-800",campaign_manager:"bg-blue-100 text-blue-800",reviewer:"bg-yellow-100 text-yellow-800",finance:"bg-green-100 text-green-800",influencer:"bg-pink-100 text-pink-800",client:"bg-gray-100 text-gray-800"})[a]}a.s(["getRoleBadgeColor",()=>h,"getRoleDisplayName",()=>g,"hasMinimumRole",()=>d,"hasRole",()=>c,"isCampaignManagerOrHigher",()=>f,"isDirector",()=>e])},15861,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36545);function f({children:a,requiredApproval:f=!0}){let{profile:g,loading:h}=(0,e.useAuth)(),i=(0,d.useRouter)();return((0,c.useEffect)(()=>{if(!h){if(!g)return void i.push("/login");if(f&&(!g.role||!g.role_approved))return void i.push("/pending-approval")}},[g,h,i,f]),h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):g&&(!f||g.role&&g.role_approved)?(0,b.jsx)(b.Fragment,{children:a}):null}a.i(70323),a.s(["default",()=>f])},87518,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15861),f=a.i(36545),g=a.i(78560),h=a.i(70323);function i(){return(0,b.jsx)(e.default,{children:(0,b.jsx)(j,{})})}function j(){let{user:a,profile:e}=(0,f.useAuth)(),i=(0,d.useRouter)(),j=(0,d.useParams)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)({title:"",description:"",platform:"",format:"",internal_deadline:"",client_deadline:"",assigned_influencer_id:""}),A=(0,h.isCampaignManagerOrHigher)(e);async function B(){try{v(!0);let{data:a,error:b}=await g.supabase.from("campaigns").select("*").eq("id",j.id).single();if(b)throw b;if(l(a),a.client_id){let{data:b}=await g.supabase.from("clients").select("*").eq("id",a.client_id).single();b&&n(b)}if(a.campaign_manager_id){let{data:b}=await g.supabase.from("profiles").select("*").eq("id",a.campaign_manager_id).single();b&&r(b)}if(a.reviewer_id){let{data:b}=await g.supabase.from("profiles").select("*").eq("id",a.reviewer_id).single();b&&t(b)}let{data:c}=await g.supabase.from("content_items").select("*").eq("campaign_id",j.id).order("created_at",{ascending:!1});c&&p(c)}catch(a){console.error("Error loading campaign:",a)}finally{v(!1)}}async function C(a){if(A&&k)try{let{error:b}=await g.supabase.from("campaigns").update({status:a}).eq("id",k.id);if(b)throw b;l({...k,status:a})}catch(a){console.error("Error updating status:",a),alert("Failed to update campaign status")}}async function D(){if(k)try{let{data:a,error:b}=await g.supabase.from("content_items").insert([{campaign_id:k.id,title:y.title,description:y.description,platform:y.platform,format:y.format,internal_deadline:y.internal_deadline||null,client_deadline:y.client_deadline||null,assigned_influencer_id:y.assigned_influencer_id||null,status:"draft",current_version:0}]).select().single();if(b)throw b;p([a,...o]),x(!1),z({title:"",description:"",platform:"",format:"",internal_deadline:"",client_deadline:"",assigned_influencer_id:""})}catch(a){console.error("Error adding content:",a),alert("Failed to add content item")}}async function E(a){if(A&&confirm("Are you sure you want to delete this content item?"))try{let{error:b}=await g.supabase.from("content_items").delete().eq("id",a);if(b)throw b;p(o.filter(b=>b.id!==a))}catch(a){console.error("Error deleting content:",a),alert("Failed to delete content item")}}function F(a){return({draft:"bg-gray-100 text-gray-800",brief_pending:"bg-yellow-100 text-yellow-800",active:"bg-blue-100 text-blue-800",content_review:"bg-purple-100 text-purple-800",client_review:"bg-indigo-100 text-indigo-800",completed:"bg-green-100 text-green-800",archived:"bg-gray-100 text-gray-600",pending_internal:"bg-yellow-100 text-yellow-800",internal_rejected:"bg-red-100 text-red-800",pending_client:"bg-yellow-100 text-yellow-800",client_rejected:"bg-red-100 text-red-800",approved:"bg-green-100 text-green-800",published:"bg-green-600 text-white"})[a]||"bg-gray-100 text-gray-800"}return((0,c.useEffect)(()=>{B()},[j.id]),u)?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})]})})}):k?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("button",{onClick:()=>i.push("/campaigns"),className:"text-blue-600 hover:text-blue-800 mb-2 flex items-center",children:"â† Back to Campaigns"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:k.campaign_code}),(0,b.jsx)("p",{className:"text-xl text-gray-600",children:k.name})]}),(0,b.jsx)("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${F(k.status)}`,children:k.status.replace(/_/g," ").toUpperCase()})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Campaign Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Client"}),(0,b.jsx)("p",{className:"font-medium",children:m?.company_name||"Not assigned"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Campaign Manager"}),(0,b.jsx)("p",{className:"font-medium",children:q?.full_name||"Not assigned"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Reviewer"}),(0,b.jsx)("p",{className:"font-medium",children:s?.full_name||"Not assigned"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Budget"}),(0,b.jsx)("p",{className:"font-medium",children:k.budget_amount?`${k.budget_currency} ${k.budget_amount.toLocaleString()}`:"Not set"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Start Date"}),(0,b.jsx)("p",{className:"font-medium",children:k.start_date?new Date(k.start_date).toLocaleDateString():"Not set"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"End Date"}),(0,b.jsx)("p",{className:"font-medium",children:k.end_date?new Date(k.end_date).toLocaleDateString():"Not set"})]}),k.brief_approved_at&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Brief Approved"}),(0,b.jsx)("p",{className:"font-medium",children:new Date(k.brief_approved_at).toLocaleDateString()})]})]}),A&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Status"}),(0,b.jsxs)("select",{value:k.status,onChange:a=>C(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"draft",children:"Draft"}),(0,b.jsx)("option",{value:"brief_pending",children:"Brief Pending"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"content_review",children:"Content Review"}),(0,b.jsx)("option",{value:"client_review",children:"Client Review"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"archived",children:"Archived"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["Content Items (",o.length,")"]}),A&&!w&&(0,b.jsx)("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Content Item"})]}),w&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-800 mb-4",children:"New Content Item"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,b.jsx)("input",{type:"text",value:y.title,onChange:a=>z({...y,title:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Platform *"}),(0,b.jsx)("input",{type:"text",value:y.platform,onChange:a=>z({...y,platform:a.target.value}),placeholder:"e.g., Instagram, TikTok, YouTube",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Format"}),(0,b.jsx)("input",{type:"text",value:y.format,onChange:a=>z({...y,format:a.target.value}),placeholder:"e.g., Reel, Story, Post",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Internal Deadline"}),(0,b.jsx)("input",{type:"date",value:y.internal_deadline,onChange:a=>z({...y,internal_deadline:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Deadline"}),(0,b.jsx)("input",{type:"date",value:y.client_deadline,onChange:a=>z({...y,client_deadline:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:y.description,onChange:a=>z({...y,description:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,b.jsx)("button",{onClick:D,disabled:!y.title||!y.platform,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Add Content Item"}),(0,b.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]}),0===o.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"No content items yet"}),A&&!w&&(0,b.jsx)("button",{onClick:()=>x(!0),className:"text-blue-600 hover:text-blue-800",children:"Add your first content item"})]}):(0,b.jsx)("div",{className:"space-y-4",children:o.map(a=>(0,b.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-800",children:a.title}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F(a.status)}`,children:a.status.replace(/_/g," ").toUpperCase()})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),(0,b.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:["ðŸ“± ",a.platform]}),a.format&&(0,b.jsxs)("span",{children:["ðŸŽ¨ ",a.format]}),a.current_version>0&&(0,b.jsxs)("span",{children:["ðŸ“„ v",a.current_version]}),a.internal_deadline&&(0,b.jsxs)("span",{children:["ðŸ“… Internal: ",new Date(a.internal_deadline).toLocaleDateString()]}),a.client_deadline&&(0,b.jsxs)("span",{children:["ðŸ‘¤ Client: ",new Date(a.client_deadline).toLocaleDateString()]})]})]}),A&&(0,b.jsx)("button",{onClick:()=>E(a.id),className:"text-red-600 hover:text-red-800 ml-4",children:"Delete"})]})},a.id))})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Campaign Not Found"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"The campaign you're looking for doesn't exist or you don't have access to it."}),(0,b.jsx)("button",{onClick:()=>i.push("/campaigns"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Campaigns"})]})})})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__abdcc69f._.js.map
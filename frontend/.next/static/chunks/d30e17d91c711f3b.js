(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26683,e=>{"use strict";var n=e.i(43476),r=e.i(71645),i=e.i(18566),s=e.i(83642),t=e.i(4249);function a({children:e,requiredApproval:a=!0}){let{profile:c,loading:l}=(0,s.useAuth)(),o=(0,i.useRouter)();return((0,r.useEffect)(()=>{if(!l){if(!c)return void o.push("/login");if(a&&(!c.role||!c.role_approved))return void o.push("/pending-approval");{let e=window.location.pathname;if(!(0,t.isRouteAllowed)(c,e))return void o.push("/dashboard")}}},[c,l,o,a]),l)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):c&&(!a||c.role&&c.role_approved)?(0,n.jsx)(n.Fragment,{children:e}):null}e.s(["default",()=>a])},18566,(e,n,r)=>{n.exports=e.r(76562)},4249,e=>{"use strict";let n={director:6,finance:5,campaign_manager:4,reviewer:3,influencer:2,client:1};function r(e,n){return!!e&&!!e.role&&!!e.role_approved&&e.role===n}function i(e,r){return!!e&&!!e.role&&!!e.role_approved&&n[e.role]>=n[r]}function s(e){return r(e,"director")}function t(e){return i(e,"campaign_manager")}function a(e,n){return e&&e.role&&e.role_approved?"/"===n||"/login"===n||"/signup"===n||(function(e){if(!e)return["/"];let n=["/dashboard","/profile"];switch(e){case"director":return[...n,"/users","/invitations","/campaigns","/clients","/influencers","/content","/reports","/finance","/invoices"];case"finance":return[...n,"/campaigns","/clients","/influencers","/reports","/finance","/invoices"];case"campaign_manager":return[...n,"/campaigns","/clients","/influencers","/content","/reports"];case"reviewer":return[...n,"/campaigns","/content","/reports"];case"influencer":return[...n,"/campaigns","/content"];case"client":return[...n,"/campaigns","/reports"];default:return n}})(e.role).some(e=>n.startsWith(e)):"/"===n||"/login"===n||"/signup"===n}function c(e){return({director:"Director",campaign_manager:"Campaign Manager",reviewer:"Reviewer",finance:"Finance",influencer:"Influencer",client:"Client"})[e]}function l(e){return({director:"bg-purple-100 text-purple-800",campaign_manager:"bg-blue-100 text-blue-800",reviewer:"bg-yellow-100 text-yellow-800",finance:"bg-green-100 text-green-800",influencer:"bg-pink-100 text-pink-800",client:"bg-gray-100 text-gray-800"})[e]}e.s(["getRoleBadgeColor",()=>l,"getRoleDisplayName",()=>c,"hasMinimumRole",()=>i,"hasRole",()=>r,"isCampaignManagerOrHigher",()=>t,"isDirector",()=>s,"isRouteAllowed",()=>a])},56567,e=>{"use strict";var n=e.i(43476),r=e.i(71645),i=e.i(18566),s=e.i(17927),t=e.i(83642),a=e.i(26683),c=e.i(4249);function l(){return(0,n.jsx)(a.default,{children:(0,n.jsx)(o,{})})}function o(){let e=(0,i.useRouter)(),{profile:a}=(0,t.useAuth)(),[l,o]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,g]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),h=(0,c.isCampaignManagerOrHigher)(a);async function f(){try{let e=s.supabase.from("clients").select("*").order("name");p||(e=e.eq("is_active",!0));let{data:n,error:r}=await e;if(r)throw r;o(n||[])}catch(e){console.error("Error fetching clients:",e.message)}finally{u(!1)}}(0,r.useEffect)(()=>{f()},[p]);let v=l.filter(e=>{if(!m)return!0;let n=m.toLowerCase();return e.name.toLowerCase().includes(n)||e.client_code.toLowerCase().includes(n)||e.company_name?.toLowerCase().includes(n)||e.email?.toLowerCase().includes(n)});return d?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,n.jsx)("p",{className:"text-gray-600",children:"Loading clients..."})})}):(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Clients"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your client database"})]}),h&&(0,n.jsx)("button",{onClick:()=>e.push("/clients/new"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"+ New Client"})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,n.jsx)("div",{className:"flex-1 w-full",children:(0,n.jsx)("input",{type:"text",placeholder:"Search by name, code, company, or email...",value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),(0,n.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,n.jsx)("input",{type:"checkbox",checked:p,onChange:e=>x(e.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-700",children:"Show inactive"})]})]})}),0===v.length?(0,n.jsx)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:(0,n.jsx)("p",{className:"text-gray-600",children:m?"No clients match your search.":"No clients yet. Add your first client to get started."})}):(0,n.jsx)("div",{className:"grid gap-4",children:v.map(r=>(0,n.jsx)("div",{onClick:()=>h&&e.push(`/clients/${r.id}`),className:`bg-white rounded-lg shadow p-6 ${h?"hover:shadow-lg transition cursor-pointer":""}`,children:(0,n.jsx)("div",{className:"flex justify-between items-start",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),(0,n.jsx)("span",{className:"text-sm font-mono text-gray-500",children:r.client_code}),!r.is_active&&(0,n.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:"Inactive"})]}),r.company_name&&(0,n.jsx)("p",{className:"text-gray-600 mb-2",children:r.company_name}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[r.email&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Email:"})," ",r.email]}),r.phone&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Phone:"})," ",r.phone]}),r.industry&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Industry:"})," ",r.industry]}),r.city&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Location:"})," ",r.city,r.country&&`, ${r.country}`]})]}),r.notes&&(0,n.jsx)("p",{className:"text-gray-600 mt-3 text-sm line-clamp-2",children:r.notes})]})})},r.id))})]})})}e.s(["default",()=>l])}]);